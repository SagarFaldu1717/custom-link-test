<!DOCTYPE html>
<html>
<head>
    <title>Custom Link</title>
    <style>
        /* Light blue button style */
        #redirectButton {
            background-color: #add8e6; /* Light blue color */
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            border-radius: 5px;
        }

        #redirectButton:hover {
            background-color: #87ceeb; /* Slightly darker blue on hover */
        }
    </style>
</head>
<body>
    <h1>Custom Link</h1>
    <p>Click the button below to open the iOS app or go to the App Store:</p>
    
    <!-- Button to trigger the custom URL scheme and App Store fallback -->
    <button id="redirectButton">Open iOS App</button>

<script>
        document.getElementById('redirectButton').addEventListener('click', function () {
            var now = Date.now();
            var appScheme = 'https://tel-qa-api.telescopehealth.com/app-facade/redirect-url/m5v2?domain=tel-qa-pp';
            var appStoreURL = 'https://apps.apple.com/app/id6670623240';

            // Create hidden iframe to trigger the app
            var iframe = document.createElement('iframe');
            iframe.style.display = 'none';
            iframe.src = appScheme;
            document.body.appendChild(iframe);

            // After 1.5s, check if page is still visible. If yes, app not installed, go to App Store
            setTimeout(function () {
                var elapsed = Date.now() - now;
                if (document.visibilityState === 'visible') {
                    window.location.href = appStoreURL;
                }
            }, 1500);
        });
    </script>
</body>
</html>
